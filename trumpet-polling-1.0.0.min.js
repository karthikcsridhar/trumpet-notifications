'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a};function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}(function(a){'use strict';function b(E,F){window.localStorage&&localStorage.setItem(E,F)}function c(E){return window.localStorage?localStorage.getItem(E):null}function d(){''===o||o||console.error(z+' requires a notificationsEndpoint to GET notifications from.'),q&&(0>q||q.constructor!==Number)&&console.error(z+' can only accept a positive integer as pollInterval.'),t&&t.constructor!==Function&&console.error(z+' can only accept a function as callback.'),u&&!a.Noty&&console.error(z+' - You have asked to use the NotyJS plugin, but it is not found. Please make sure to include it before Trumpet plugin. Else disable Noty.')}function e(){var E=new XMLHttpRequest,F=o+'?ts='+new Date().getTime();if(p)for(var G in p)p.hasOwnProperty(G)&&E.setRequestHeader(G,p[G]);E.open('GET',F,!0),E.onload=function(){f(JSON.parse(E.responseText)),a.stopTrumpeting||setTimeout(function(){e()},q)},E.send()}function f(E){var F,G=[];for(F in E)if(E.hasOwnProperty(F)&&!c(A+F)){var H={title:E[F][y.messageField],message:E[F][y.messageField],type:E[F][y.notificationTypeField],timestamp:E[F][y.timeStampField]};b(A+F,H),G.push(H),g(H)}t&&t.constructor===Function&&t(G)}function g(E){u&&a.Noty?i(E):h(E)}function h(E){var F,G,H,I;F=document.createElement('div'),F.classList.add('trumpet-notif-'+E.type),F.classList.add('trumpetItemContainer'),G=document.createElement('strong'),G.textContent=E.type,F.appendChild(G),H=document.createElement('span'),H.textContent=E.message,F.appendChild(H),I=document.createElement('div'),I.className='trumpetClose',I.innerHTML='&times;',F.appendChild(I),E.close=I,E.node=F,w.appendChild(E.node),E.close.addEventListener('click',function(){var J=this.parentNode;J.parentNode.removeChild(J)})}function i(E){u&&a.Noty&&(a.mojs&&(v.animation=C.notyMojsAnimation),v.text=E.message,v.type=E.type,new Noty(v).show())}function j(){var E;w=document.getElementById('trumpet-container'),w||(E=document.createElement('div'),document.body.insertBefore(E,document.body.firstChild),w=E,x&&w.classList.add('trumpet-notif-'+x))}function k(){var F,E=document.createElement('style');E.appendChild(document.createTextNode('')),document.body.appendChild(E),F=E.sheet,l(F,'.trumpet-notif-alert','background-color: #ffe5fd; border-color: #f1d8ef; color: #a94442;'),l(F,'.trumpet-notif-info','background-color: #7f7eff; border-color: #7473e8; color: #fff;'),l(F,'.trumpet-notif-success','background-color: #60A917; border-color: #4d8712; color: #fff;'),l(F,'.trumpet-notif-error','background-color: #f51f1f; border-color: #d82d2d; color: #fff;'),l(F,'.trumpet-notif-warning','background-color: #ffae42; border-color: #e89f3c; color: #fff;'),l(F,'.trumpetItemContainer','position: relative; border-radius: 2px; border: 1px solid; font-size: 14px; padding: 10px 0 10px 14px; font-family: \'Helvetica Neue\', Helvetica, Arial, sans-serif; margin: 10px 0;line-height: normal;'),l(F,'.trumpetItemContainer strong','float: left; margin-right: 15px; line-height: 15px'),l(F,'.trumpetItemContainer span','display:table-cell; padding-right: 35px;'),l(F,'.trumpetClose','position: absolute; right: 10px; top: 0; cursor: pointer; font-size: 26px; font-weight: bold;'),l(F,'.trumpet-notif-topRight','width: 340px; position: absolute; right: 10px; top: 5px;'),l(F,'.trumpet-notif-top','width: 340px; left: 50%; transform: translate(-170px,0); position: absolute; top: 5px;'),l(F,'.trumpet-notif-bottom','width: 340px; left: 50%; transform: translate(-170px,0); position: absolute; bottom: 5px;'),l(F,'.trumpet-notif-bottomRight','width: 340px; position: absolute; right: 10px; bottom: 5px;'),l(F,'.trumpet-notif-topLeft','width: 340px; position: absolute; left: 10px; top: 5px;'),l(F,'.trumpet-notif-bottomLeft','width: 340px; position: absolute; left: 10px; bottom: 5px;')}function l(E,F,G,H){H=H||0,E.insertRule?E.insertRule(F+'{'+G+'}',H):E.addRule(F,G,H)}var m,o,p,q,t,u,v,w,x,y,z='Trumpet',A='trumpet:',B=!1,C={serverBaseUrl:'http://localhost:3000/',notificationsEndpoint:'',pollInterval:10000,responsePayloadStructure:{titleField:'title',messageField:'message',notificationTypeField:'type',timeStampField:'timestamp'},useNoty:!1,notySettings:{type:'success',layout:'topRight',theme:'metroui',timeout:1e4,progressBar:!0,closeWith:['click','button'],animation:{open:'noty_effects_open',close:'noty_effects_close'},id:!1,modal:!1},notyMojsAnimation:{open:function open(E){var F=this,G=new mojs.Timeline,H=new mojs.Html({el:F.barDom,x:{500:0,delay:0,duration:500,easing:'elastic.out'},isForce3d:!0,onComplete:function onComplete(){E(function(L){L()})}}),I=new mojs.Shape({parent:F.barDom,width:200,height:F.barDom.getBoundingClientRect().height,radius:0,x:_defineProperty({},150,-150),duration:600,isShowStart:!0});F.barDom.style.overflow='visible',I.el.style.overflow='hidden';var J=new mojs.Burst({parent:I.el,count:10,top:F.barDom.getBoundingClientRect().height+75,degree:90,radius:75,angle:_defineProperty({},-90,40),children:{fill:'#EBD761',delay:'stagger(500, -50)',radius:'rand(8, 25)',direction:-1,isSwirl:!0}}),K=new mojs.Burst({parent:I.el,count:2,degree:0,angle:75,radius:{0:100},top:'90%',children:{fill:'#EBD761',pathScale:[0.65,1],radius:'rand(12, 15)',direction:[-1,1],delay:400,isSwirl:!0}});G.add(H,J,K,I),G.play()},close:function close(E){var F=this;new mojs.Html({el:F.barDom,x:{0:500,delay:10,duration:500,easing:'cubic.out'},skewY:{0:10,delay:10,duration:500,easing:'cubic.out'},isForce3d:!0,onComplete:function onComplete(){E(function(G){G()})}}).play()}}},D={init:function init(E){m=E.serverBaseUrl||m||C.serverBaseUrl,o=E.notificationsEndpoint||o||C.notificationsEndpoint,p=E.endpointHeaders||p,q=1e3*E.pollIntervalInSecs||q||C.pollInterval,t=E.callback||t,x=E.position||x,u=E.useNoty||u||C.useNoty,v=E.notySettings||v||C.notySettings,y=E.responsePayloadStructure||y||C.responsePayloadStructure,d(),u||(j(),k()),B||(B=!0,e())}};'object'===('undefined'==typeof exports?'undefined':_typeof(exports))?module.exports=D:'function'==typeof define&&define.amd?define(function(){return D}):a.Trumpet=D})(window);